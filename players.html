<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>埼玉西武ライオンズ 選手名鑑</title>
<style>
body { font-family:"Segoe UI","Noto Sans JP",sans-serif; background:linear-gradient(135deg,#091b3d,#0d2b5e); color:#fff; margin:0; padding:20px;}
h1 { text-align:center; margin-bottom:20px; font-size:2em; text-shadow:1px 1px 5px #000;}
.controls { display:flex; flex-wrap:wrap; gap:20px; justify-content:center; margin-bottom:25px; }
.controls select, .controls input { padding:6px 10px; font-size:14px; border-radius:6px; border:none; outline:none; }

.range-slider { display:flex; flex-direction:column; align-items:center; margin-bottom:10px; min-width:200px; }
.range-slider label { font-size:0.85em; margin-bottom:4px; }
.range-slider .slider-inputs { display:flex; justify-content:space-between; width:100%; margin-bottom:4px; }
.range-slider input[type=range] { width:100%; }

.player-grid { display:grid; grid-template-columns:repeat(4,1fr); gap:20px; }
@media(max-width:1000px){ .player-grid { grid-template-columns:repeat(2,1fr); } }
@media(max-width:600px){ .player-grid { grid-template-columns:1fr; } }

.player-card { display:flex; background:rgba(10,25,60,0.85); border-radius:12px; overflow:hidden; box-shadow:0 5px 15px rgba(0,0,0,0.5); transition: transform 0.2s, box-shadow 0.2s; }
.player-card:hover { transform:translateY(-5px); box-shadow:0 10px 25px rgba(0,0,0,0.7);}
.player-photo { flex:1; min-width:120px; }
.player-photo img { width:100%; aspect-ratio:1/1; object-fit:cover; }
.player-info { flex:2; padding:10px 12px; display:flex; flex-direction:column; justify-content:space-between; }
.player-info .top { display:flex; justify-content:space-between; font-weight:bold; }
.player-info .top .number { color:#fff; font-family:"Impact","Segoe UI",sans-serif; font-size:1em; }
.player-info .top .position { font-weight:bold; padding:2px 6px; border-radius:6px; font-size:0.9em; color:#fff;}
.player-info .middle { text-align:center; font-size:1.2em; font-weight:bold; margin:5px 0; color:#fff; }
.player-info .bottom { display:flex; justify-content:space-between; font-size:0.85em; color:#ccc; }
.player-info a { color:#fff; text-decoration:none; }
.player-info a:hover { text-decoration:underline; }

.position-投手{background:#1E90FF;}
.position-捕手{background:#FF4500;}
.position-内野手{background:#32CD32;}
.position-外野手{background:#FFD700;}
</style>
</head>
<body>

<h1>埼玉西武ライオンズ 選手名鑑</h1>

<div class="controls">
  <select id="yearSelect" multiple size="4"></select>
  <select id="positionFilter">
    <option value="">全てのポジション</option>
    <option value="投手">投手</option>
    <option value="捕手">捕手</option>
    <option value="内野手">内野手</option>
    <option value="外野手">外野手</option>
  </select>
  <div id="nameSearchWrapper">
    <input type="text" id="nameSearch" placeholder="名前で検索">
    <div id="autocompleteList"></div>
  </div>

  <!-- 背番号スライダー -->
  <div class="range-slider">
    <label>背番号範囲:</label>
    <div class="slider-inputs">
      <input type="number" id="numMinInput" min="0" max="145" value="0">
      <input type="number" id="numMaxInput" min="0" max="145" value="145">
    </div>
    <input type="range" id="numMin" min="0" max="145" value="0">
    <input type="range" id="numMax" min="0" max="145" value="145">
  </div>

  <!-- ドラフトスライダー -->
  <div class="range-slider">
    <label>ドラフト年範囲:</label>
    <div class="slider-inputs">
      <input type="number" id="draftMinInput" min="2010" max="2026" value="2010">
      <input type="number" id="draftMaxInput" min="2010" max="2026" value="2026">
    </div>
    <input type="range" id="draftMin" min="2010" max="2026" value="2010">
    <input type="range" id="draftMax" min="2010" max="2026" value="2026">
  </div>

  <!-- 年齢スライダー -->
  <div class="range-slider">
    <label>年齢範囲:</label>
    <div class="slider-inputs">
      <input type="number" id="ageMinInput" min="17" max="50" value="17">
      <input type="number" id="ageMaxInput" min="17" max="50" value="50">
    </div>
    <input type="range" id="ageMin" min="17" max="50" value="17">
    <input type="range" id="ageMax" min="17" max="50" value="50">
  </div>
</div>

<div class="player-grid" id="playerGrid"></div>

<script>
// サンプルデータ
const players={
  "2026":[
    { "number":11,"name":"上田 大河","position":"投手","birth_year":2002,"draft":"2020","photo":"images/11_ueda_taiga.png","link":"players/11_ueda_taiga.html" },
    { "number":65,"name":"古市 尊","position":"捕手","birth_year":2000,"draft":"2018","photo":"images/65_furuichi_takashi.png","link":"players/65_furuichi_takashi.html" }
  ],
  "2025":[
    { "number":11,"name":"上田 大河","position":"投手","birth_year":2002,"draft":"2020","photo":"images/11_ueda_taiga.png","link":"players/11_ueda_taiga.html" }
  ]
};

// 年度プルダウン
const yearSelect=document.getElementById('yearSelect');
for(let y=2026;y>=2017;y--){
  const opt=document.createElement('option'); opt.value=y; opt.textContent=y+"年";
  yearSelect.appendChild(opt);
}

// スライダーと数値入力連動
function syncSliderAndInput(sliderId, inputId, min, max){
  const slider=document.getElementById(sliderId);
  const input=document.getElementById(inputId);
  slider.addEventListener('input', ()=>{
    slider.value=Math.min(Math.max(slider.value,min),max);
    input.value=slider.value;
    renderPlayers();
  });
  input.addEventListener('input', ()=>{
    input.value=Math.min(Math.max(input.value,min),max);
    slider.value=input.value;
    renderPlayers();
  });
}

// 背番号
syncSliderAndInput('numMin','numMinInput',0,145);
syncSliderAndInput('numMax','numMaxInput',0,145);
// ドラフト
syncSliderAndInput('draftMin','draftMinInput',2010,2026);
syncSliderAndInput('draftMax','draftMaxInput',2010,2026);
// 年齢
syncSliderAndInput('ageMin','ageMinInput',17,50);
syncSliderAndInput('ageMax','ageMaxInput',17,50);

// デュープ
function dedupe(playersArray){ const map=new Map(); playersArray.sort((a,b)=>b.year-a.year); playersArray.forEach(p=>{ if(!map.has(p.name)) map.set(p.name,p); }); return Array.from(map.values()); }

// 総合検索＆描画
function renderPlayers(){
  const selectedYears=[...yearSelect.selectedOptions].map(o=>o.value);
  let filtered=[];
  selectedYears.forEach(y=>{
    const yearData=players[y]||[];
    yearData.forEach(p=>p.year=parseInt(y));
    filtered=filtered.concat(yearData);
  });
  filtered=dedupe(filtered);

  const pos=document.getElementById('positionFilter').value;
  if(pos) filtered=filtered.filter(p=>p.position===pos);

  const name=document.getElementById('nameSearch').value.trim();
  if(name) filtered=filtered.filter(p=>p.name.includes(name));

  let numMin=parseInt(document.getElementById('numMin').value);
  let numMax=parseInt(document.getElementById('numMax').value);
  if(numMin>numMax) numMin=numMax;
  if(numMax<numMin) numMax=numMin;
  filtered=filtered.filter(p=>p.number>=numMin && p.number<=numMax);

  let draftMin=parseInt(document.getElementById('draftMin').value);
  let draftMax=parseInt(document.getElementById('draftMax').value);
  if(draftMin>draftMax) draftMin=draftMax;
  if(draftMax<draftMin) draftMax=draftMin;
  filtered=filtered.filter(p=>p.draft && p.draft!=='-' && p.draft>=draftMin && p.draft<=draftMax);

  let ageMin=parseInt(document.getElementById('ageMin').value);
  let ageMax=parseInt(document.getElementById('ageMax').value);
  if(ageMin>ageMax) ageMin=ageMax;
  if(ageMax<ageMin) ageMax=ageMin;
  filtered=filtered.filter(p=>{
    const age=p.year-p.birth_year;
    return age>=ageMin && age<=ageMax;
  });

  filtered.sort((a,b)=>a.number-b.number);

  const grid=document.getElementById('playerGrid');
  grid.innerHTML="";
  filtered.forEach(p=>{
    const age=p.year-p.birth_year;
    const card=document.createElement('div'); card.className="player-card";
    card.innerHTML=`
      <div class="player-photo"><img src="${p.photo}" alt="${p.name}"></div>
      <div class="player-info">
        <div class="top">
          <div class="number">${p.number}</div>
          <div class="position position-${p.position}">${p.position}</div>
        </div>
        <div class="middle"><a href="${p.link}">${p.name}</a></div>
        <div class="bottom">
          <div>${p.draft||"-"}</div>
          <div>${age}歳</div>
        </div>
      </div>`;
    grid.appendChild(card);
  });

  updateAutocomplete(filtered);
}

// オートコンプリート
const autocompleteList=document.getElementById('autocompleteList');
function updateAutocomplete(currentFiltered){
  autocompleteList.innerHTML="";
  const inputName=document.getElementById('nameSearch').value.trim();
  if(!inputName) return;
  currentFiltered.slice(0,10).forEach(p=>{
    const div=document.createElement('div');
    div.textContent=p.name;
    div.addEventListener('click', ()=>{
      document.getElementById('nameSearch').value=p.name;
      renderPlayers();
      autocompleteList.innerHTML="";
    });
    autocompleteList.appendChild(div);
  });
}

// イベント登録
['change','input'].forEach(ev=>{
  yearSelect.addEventListener(ev, renderPlayers);
  document.getElementById('positionFilter').addEventListener(ev, renderPlayers);
  document.getElementById('nameSearch').addEventListener(ev, renderPlayers);
});

// 初期値
yearSelect.options[0].selected=true;
renderPlayers();
</script>
</body>
</html>
